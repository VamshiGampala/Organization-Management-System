<p-toast></p-toast>
<nav class="navbar navbar-expand-lg header">
    <div class="container-fluid">
        <div class="navbar-header">
          <div class="header1 d-flex">
              <p class="name1 ml-5">Organization Management System</p>
          </div>
          
        </div>
        <div type="submit" class="d-flex ml-auto" [matMenuTriggerFor]="menu">
            <!-- <label id="dropdownBasic1" aria-expanded="false" style="padding-top: 10px;padding-right:10px;color: #333;
            font-size: 14px;" type="submit">
              {{profileName}}
        </label> &nbsp; -->

        <label class="text-label" aria-expanded="false" title="{{profileName | titlecase}}">
          <span style="color: white;">{{profileName| titlecase}}</span> </label>
            <ngx-avatar bgColor="#fff" fgColor="#506681"  class="icon-style" [name]="profileName" size="40" [initialsSize]="2"></ngx-avatar>
            <!-- <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
              <button ngbDropdownItem [routerLink]="['/profile']">Profile</button>
              <button ngbDropdownItem (click)="changePassword()">Change</button>
              <button ngbDropdownItem (click)="logout()">Logout</button>
            </div> -->
            <mat-menu #menu="matMenu">
          <button id="user-profile-button" mat-menu-item [routerLink]="['/profile']"><i class="fa fa-user"></i>&nbsp;&nbsp;Profile</button>
          <button id="change-password" mat-menu-item (click)="changePassword()"><i class="fa fa-unlock-alt"></i>&nbsp;&nbsp;Change Password</button>
          <button id="logout-button" mat-menu-item (click)="logout()"> <i class="fa fa-power-off"></i>&nbsp;&nbsp;Logout</button>
        </mat-menu>
          </div>
        <div>
        </div>     
    </div>

  
</nav>



<!-------Change Password Modal-->
<div  [config]="{backdrop: 'static'}" bsModal #changePasswordData="bs-modal" class="modal fade" tabindex="-1" id="contractorEmploymentDetails" role="dialog"
[config]="{backdrop: 'static'}" aria-hidden="true">
<div class="modal-dialog modal-md">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title ml-2 mt-3"><strong>Change Password</strong></h5>
      <span type="button" class="close mr-2" (click)="onCloseChangePassword()">&times;</span>
    </div>
    <div class="modal-body">
        <form [formGroup]="changePasswordForm">
          <div class="row">
            <div class="col-lg-12">
              <label class="form-label">Current Password <span class="mandatory">*</span></label>
              <input [ngClass]="{ 'is-invalid': changePasswordForm.controls.currentPassword.touched && changePasswordForm.controls.currentPassword.errors }" class="form-control form-control-sm" [type]="isShowCurrentPassword == false ? 'password' : 'text'" formControlName="currentPassword" placeholder="Enter current password" appAlphaWithSpace inputType="noWhiteSpaceAtBeginning">
              <div class="eye-icon">
                <i class="fa" [ngClass]="isShowCurrentPassword == false ? 'fa-eye-slash' : 'fa-eye'" (click)="onClickCurrentPasswordIcon()"></i>
              </div>
              <p class="mandatory"
          *ngIf="changePasswordForm.controls['currentPassword'].hasError('required') && changePasswordForm.controls['currentPassword'].touched">Please enter current password</p>
            </div>
          </div>
          <div class="row pt-2">
            <div class="col-lg-12">
              <label class="form-label">New Password <span class="mandatory">*</span></label>
              <input [ngClass]="{ 'is-invalid': changePasswordForm.controls.newPassword.touched && changePasswordForm.controls.newPassword.errors }" class="form-control form-control-sm" [type]="isShowNewPassword == false ? 'password' : 'text'" formControlName="newPassword" placeholder="Enter new password" appAlphaWithSpace inputType="noWhiteSpaceAtBeginning">
              <div class="eye-icon">
                <i class="fa" [ngClass]="isShowNewPassword == false ?'fa-eye-slash' : 'fa-eye'" (click)="onClickNewPasswordIcon()"></i>
              </div>
              <div
          *ngIf="changePasswordForm.controls['newPassword'].hasError('required') && changePasswordForm.controls['newPassword'].touched"
          class="mandatory">Please enter new password</div>
          <div
          *ngIf="changePasswordForm.controls['newPassword'].hasError('equivalent') && changePasswordForm.controls['newPassword'].touched"
          class="mandatory">
          Current Password and New Password cannot be same.
        </div>
        <span *ngIf="changePasswordForm.controls['newPassword'].hasError('pattern')" class="mandatory">
          {{_stringResourceErrors.PASSWORD_VALIDATION_PATTERN1}}
        </span>
        <span *ngIf="changePasswordForm.controls['newPassword'].hasError('minlength')" class="mandatory">
          {{_stringResourceErrors.PASSWORD_VALIDATION_PATTERN2}}
        </span>
        <span *ngIf="changePasswordForm.controls['currentPassword'].hasError('maxlength')"class="mandatory">
          {{_stringResourceErrors.PASSWORD_VALIDATION_PATTERN3}}</span>
            </div>
          </div>
          <div class="row pt-2">
            <div class="col-lg-12">
              <label class="form-label">Confirm Password <span class="mandatory">*</span></label>
              <input [ngClass]="{ 'is-invalid': changePasswordForm.controls.confirmPassword.touched && changePasswordForm.controls.confirmPassword.errors }" class="form-control form-control-sm" [type]="isShowConfirmPassword == false ? 'password' : 'text'" formControlName="confirmPassword" placeholder="Enter confirm password" appAlphaWithSpace inputType="noWhiteSpaceAtBeginning">
              <div class="eye-icon">
                <i class="fa" [ngClass]="isShowConfirmPassword == false ? 'fa-eye-slash' : 'fa-eye'" (click)="onClickConfirmPasswordIcon()"></i>
              </div>
              <div
          *ngIf="changePasswordForm.controls['confirmPassword'].hasError('required') && changePasswordForm.controls['confirmPassword'].touched"
          class="mandatory">{{_stringResourceErrors.FIELD_REQUIRED}}
        </div>
        <div
          *ngIf="changePasswordForm.controls['confirmPassword'].hasError('notEquivalent') && changePasswordForm.controls['confirmPassword'].touched"
          class="mandatory">
          {{_stringResourceErrors.PASSWORD_MISMATCH}}
        </div>
            </div>
          </div>
        
        </form>
    </div>
    <div class="modal-footer">
        <button class="cancel-button" (click)="onResetChangePassword()">Reset</button>
        <button class="save-button" (click)="onSubmitChangePassword()">Submit</button>
      </div>
    </div>
  </div>
</div>